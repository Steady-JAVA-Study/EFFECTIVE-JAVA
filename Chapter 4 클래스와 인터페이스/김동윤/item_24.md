# 멤버 변수는 되도록 static 으로 만들라

## 중첩 클래스?
- 클래스안에 또다른 클래스가 정의되는 것
- 특정 클래스를 자신의 클래스 내부적인 용도로만 사용하고자 할때 효율적
- 중첩클래스를 포함하는 외부 클래스를 Outer 클래스라고 하며 내부에 포함된 클래스를 중첩클래스 또는 Inner 클래스
- 중첩 클래스는 자신을 감싼 바깥 클래스에서만 쓰여야 하며, 그 외의 쓰임새가 있다면 톱 레벨 클래스로 만들어야 함 

## 중첩 클래스들?
- 정적 멤버 클래스 (static member class) // 이 칭긔를 좀 더 보자보자
- 비정적 멤버 클래스
- 익명 클래스
- 지역 클래스

## 정적 멤버 클래스?
- 클래스 내부의 static 클래스
- 정적 멤버 클래스는 다른 클래스 안에 선언되고, 바깥 클래스의 private 멤버에도 접근할 수 있다는 점만 제외하면 일반 클래스와 똑같다.

```java

public class OuterClass {

  private int x = 10;

  private static class InnerClass {
    void test() {
      OuterClass outerClass = new OuterClass();
      //바깥 클래스에 private 멤버에 접근하는 중
      outerClass.x = 100;
    }
  }
}
```
- private으로 선언하면 바깥 클래스에서만 접근 가능
- 다른 클래스에서는 절대 접근 불가


## 비정적 클래스 

- 비정적 멤버 클래스의 인스턴스와 바깥 인스턴스의 사이의 관계는 멤버 클래스가 인스턴스화될 때 확립되며, 더 이상 변경 X
- 비정적 멤버 클래스의 인스턴스는 바깥 클래스인 TestClass와 암묵적으로 연결
- 비정적 멤버 클래스의 인스턴스 메서드에서 정규화된 this를 사용해 바깥 인스턴스의 메서드를 호출하거나 바깥 인스턴스의 참조를 가져올 수 있다.
```java
public class TestClass {

    void x() {
    }
    
     class NestedClass {
        
        void x() {
            TestClass.this.x();
        }
        
    }
}
```

- 멤버 클래스에서 바깥 인스턴스에 접근할 일이 없다면 무조건 static을 붙여서 정적 멤버 클래스로 만들어야 한다
- static을 생략하면 바깥 인스턴스로의 숨은 외부 참조를 갖게 된다
- Then 가비지 컬렉션이 바깥 클래스의 인스턴스를 수거하지 못하는 메모리 누수가 생길 수 있다는 점이다.

## 결론
### 메서드 밖에서도 사용해야 하거나 메서드 안에 정의하기에 너무 길다면 -> 멤버 클래스
#### 멤버 클래스의 인스턴스가 바깥 인스턴스를 참조하면 -> 비정적
#### 멤버 클래스의 인스턴스가 바깥 인스턴스를 참조안하면 -> 정적


> - 멤버 클래스에서 바깥 인스턴스에 접근할 일이 없다면 무조건 static을 붙여서 정적 멤버 클래스로 만들긔
- static 을 생략하면 바깥 인스턴스로의 숨은 외부 참조를 갖게 되고 심각한 경우 GC가 바깥 인스턴스를 수거하지 못하는 경우가 발생

- 중첩 클래스에는 네 가지(정적 멤버 클래스, 비정적 멤버 클래스, 익명 클래스, 지역 클래스)가 있으며 각각의 쓰임이 다르다.
- 메서드 밖에서도 사용해야 하거나 메서드 안에 정의하기엔 너무 길다면 멤버 클래스로 만든다.
- 멤버 클래스의 인스턴스 각각이 바깥 인스턴스를 참조한다면 비정적으로, 그렇지 않으면 정적으로 만들자.
- 중첩 클래스가 한 메서드 안에서만 쓰이면서 그 인스턴스를 생성하는 지점이 단 한 곳이고 해당 타입으로 쓰기에 적합한 클래스나 인터페이스가 이미 있다면 익명 클래스로 만들고, 그렇지 않다면 지역 클래스로 만들자.

## 출처
https://jobjava00.github.io/language/java/basic/nested-class/ [중첩 클래스]
https://javabom.tistory.com/46
https://donghyeon.dev